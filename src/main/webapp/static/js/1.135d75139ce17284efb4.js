webpackJsonp([1],{"+vch":function(t,e){},NjNu:function(t,e){},Ud3q:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("h9xL"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return this.item.commentUserid===this.$store.state.userInfo.userId||this.textWriterId===this.$store.state.userInfo.userId?e("Tooltip",{attrs:{content:"删除"}},[e("Col",[e("Button",{attrs:{type:"text"},on:{click:this.deleteComment}},[e("Icon",{attrs:{type:"ios-trash",size:"20"}})],1)],1)],1):this._e()},staticRenderFns:[]};var n={name:"reply",inject:["reload"],data:function(){return{flag:!1,commentReply:""}},methods:{reply:function(){this.flag=!0},replyCommment:function(){var t=this;if(""!==this.commentReply){var e=new URLSearchParams;e.append("commentTextid",this.item.commentTextid),e.append("commentUserid",this.$store.state.userInfo.userId),e.append("commentContent",this.commentReply),e.append("commentReplyid",this.item.commentId),this.axios.post("comment",e).then(function(e){100===e.data.code?(t.$Message.success("回复成功"),t.reload()):t.$Message.error("回复失败")}).catch(function(e){t.$Message.warning("回复错误")})}else this.$Message.error("回复内容为空")}},components:{deleteComment:s("C7Lr")({name:"DeleteComment",inject:["reload"],data:function(){return{}},methods:{deleteComment:function(){var t=this;this.axios.delete("comment",{params:{commentId:this.item.commentId,commentTextid:this.item.commentTextid,commentUserid:this.item.commentUserid}}).then(function(e){100===e.data.code?(t.$Message.success("删除成功"),t.reload()):t.$Message.warning("删除失败")}).catch(function(e){t.$Message.warning("删除失败")})}},components:{},mounted:function(){},props:["item","textWriterId"]},r,!1,function(t){s("+vch")},"data-v-86ddc486",null).exports},mounted:function(){},props:["item","textWriterId"]},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end"}},[s("Col",{staticStyle:{"margin-right":"100px"}},[s("delete-comment",{attrs:{item:t.item,textWriterId:t.textWriterId}}),t._v(" "),s("Tooltip",{attrs:{content:"回复"}},[s("Button",{attrs:{type:"text"},on:{click:function(e){t.flag=!0}}},[s("Icon",{attrs:{type:"md-text",size:"20"}})],1)],1)],1)],1),t._v(" "),""!==t.$store.state.userInfo&&!0===t.flag?s("Row",[s("Col",{attrs:{offset:"8"}},[s("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:2},placeholder:"写下你的评论"},model:{value:t.commentReply,callback:function(e){t.commentReply=e},expression:"commentReply"}}),t._v(" "),s("Button",{attrs:{type:"primary",size:"large"},on:{click:t.replyCommment}},[t._v("评论")]),t._v(" "),s("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.flag=!1}}},[t._v("取消")])],1)],1):!0===this.flag?s("Row",{attrs:{type:"flex",align:"middle",justify:"center"}},[s("Col",{attrs:{span:"4"}},[s("router-link",{attrs:{to:"/login"}},[s("Button",{attrs:{type:"primary"}},[t._v("登陆后评论")])],1)],1)],1):t._e()],1)},staticRenderFns:[]};var i=s("C7Lr")(n,a,!1,function(t){s("NjNu")},"data-v-40cb64e6",null).exports,c={render:function(){var t=this.$createElement;return(this._self._c||t)("Avatar",{attrs:{src:this.a,size:"large"}})},staticRenderFns:[]};var l=s("C7Lr")({name:"HeadImg",data:function(){return{a:"http://106.14.137.176:8080/blog/static/files/imgs/"}},methods:{},components:{},mounted:function(){this.a=this.a+this.src},props:["src"]},c,!1,function(t){s("thWI")},"data-v-01611892",null).exports,u={name:"Comment",inject:["reload"],data:function(){return{commentArray:[],comment:"",flag:!1}},methods:{getComment:function(){var t=this;this.axios.get("comment/text/"+this.textId).then(function(e){100==e.data.code&&(t.commentArray=e.data.map.TextComment,t.commentArray.reverse())}).catch(function(e){t.$Message.warning("获取评论失败")})},commentText:function(){var t=this;if(""!==this.comment){var e=new URLSearchParams;e.append("commentTextid",this.textId),e.append("commentUserid",this.$store.state.userInfo.userId),e.append("commentContent",this.comment),this.axios.post("comment",e).then(function(e){100===e.data.code?(t.$Message.success("评论成功"),t.reload()):t.$Message.error("评论失败")}).catch(function(e){t.$Message.warning("评论错误")})}else this.$Message.error("评论内容为空")},pageChange:function(t){this.pageNum=t},deleteComment:function(t){var e=this;this.axios.delete("comment",{params:{commentId:t.commentId,commentTextid:t.commentTextid,commentUserid:t.commentUserid}}).then(function(t){100===t.data.code?(e.$Message.success("删除成功"),e.reload()):e.$Message.warning("删除失败")}).catch(function(t){e.$Message.warning("删除失败")})}},components:{reply:i,HeadPortrait:o.a,HeadImg:l},mounted:function(){this.getComment()},props:["textId","textWriterId"],watch:{pageNum:function(){this.getComment()}}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Row",{staticStyle:{"margin-bottom":"30px"}},[o("Col",{attrs:{offset:"1"}},[o("h2",[t._v("评论区")])]),t._v(" "),""!==this.$store.state.userInfo?o("Row",{attrs:{type:"flex",align:"bottom"}},[o("Col",{attrs:{offset:"1"}},[""!==this.$store.state.userInfo&&"default.jpg"===this.$store.state.userInfo.userHeadportrait?o("Button",{attrs:{type:"text"},on:{click:function(e){t.$router.push("/personHome/"+t.$store.state.userInfo.userId),t.reload()}}},[o("img",{staticClass:"round_icon",attrs:{src:s("JoZn"),alt:""}})]):o("Button",{attrs:{type:"text"},on:{click:function(e){t.$router.push("/personHome/"+t.$store.state.userInfo.userId),t.reload()}}},[o("Head-portrait",{attrs:{src:this.$store.state.userInfo.userHeadportrait,size:"large"}})],1)],1),t._v(" "),o("Col",{attrs:{offset:"1"}},[o("Input",{staticStyle:{width:"600px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"写下你的评论"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),t._v(" "),o("Col",{attrs:{offset:"1"}},[o("Button",{attrs:{type:"primary",size:"large"},on:{click:t.commentText}},[t._v("评论")])],1)],1):o("Row",{attrs:{type:"flex",align:"middle",justify:"center"}},[o("Col",{attrs:{span:"4"}},[o("router-link",{attrs:{to:"/login"}},[o("Button",{attrs:{type:"primary",long:""}},[t._v("登陆后评论")])],1)],1)],1)],1),t._v(" "),t._l(t.commentArray,function(e,s){return o("Row",{key:e.commentId,staticClass:"comment"},[null===e.commentReplyid?o("Row",[o("Col",{staticStyle:{"margin-right":"40px"},attrs:{offset:"1",span:"1"}},[o("Button",{attrs:{type:"text"},on:{click:function(s){t.$router.push("/personHome/"+e.user.userId),t.reload()}}},["default.jpg"===e.user.userHeadportrait?o("Avatar",{attrs:{src:"../../../static/img/default.jpg",size:"large"}}):o("Head-img",{attrs:{src:e.user.userHeadportrait}})],1)],1),t._v(" "),o("Col",{staticStyle:{"margin-left":"90px"}},[o("p",{staticStyle:{"font-size":"17px"}},[t._v(t._s(e.user.userName))]),t._v(" "),o("span",[t._v(t._s(t.commentArray.length-s)+"楼")]),t._v(" "),o("span",[t._v(t._s(e.commentDate))])]),t._v(" "),o("Row",[o("Col",{attrs:{offset:"2"}},[o("p",{staticClass:"content"},[t._v("\n            "+t._s(e.commentContent))])])],1),t._v(" "),o("div",{staticClass:"commentHr"}),t._v(" "),o("reply",{attrs:{item:e,textWriterId:t.textWriterId}}),t._v(" "),t._l(t.commentArray,function(s,r){return o("Row",{key:s.commentId},[null!==s.commentReplyid&&s.commentReplyid===e.commentId?o("Row",{staticStyle:{"margin-left":"40px"}},[o("Col",{staticStyle:{"margin-right":"40px"},attrs:{offset:"1",span:"1"}},[o("Button",{attrs:{type:"text"},on:{click:function(e){t.$router.push("/personHome/"+s.user.userId),t.reload()}}},["default.jpg"===s.user.userHeadportrait?o("Avatar",{attrs:{src:"../../../static/img/default.jpg",size:"large"}}):o("Head-img",{attrs:{src:s.user.userHeadportrait}})],1)],1),t._v(" "),o("Col",{staticStyle:{"margin-left":"90px"}},[o("p",{staticStyle:{"font-size":"17px"}},[t._v(t._s(s.user.userName))]),t._v(" "),o("span",[t._v(t._s(t.commentArray.length-r)+"楼")]),t._v(" "),o("span",[t._v(t._s(s.commentDate))])]),t._v(" "),o("Row",[o("Col",{attrs:{offset:"2"}},[o("div",{staticClass:"content"},[t._v("\n                      "+t._s(s.commentContent)+"\n                    ")]),t._v(" "),s.commentUserid===t.$store.state.userInfo.userId||t.textWriterId===t.$store.state.userInfo.userId?o("Tooltip",{attrs:{content:"删除"}},[o("Button",{attrs:{type:"text"},on:{click:function(e){return t.deleteComment(s)}}},[o("Icon",{attrs:{type:"ios-trash",size:"20"}})],1)],1):t._e()],1)],1),t._v(" "),o("div",{staticClass:"commentHrReply"})],1):t._e()],1)})],2):t._e()],1)})],2)},staticRenderFns:[]};var d=s("C7Lr")(u,m,!1,function(t){s("WRsR")},"data-v-72eea920",null).exports,h=s("aiqZ"),f={name:"Editor",inject:["reload"],components:{quillEditor:h.quillEditor},data:function(){return{formCustom:{content:"",textId:0,str:"",title:"",writer:""},ruleValidate:{title:[{required:!0,message:"标题不为空",trigger:"blur"}]}}},methods:{getContent:function(){var t=this;this.axios.get("text/"+this.formCustom.textId).then(function(e){100===e.data.code?e.data.map.texts.textWriterid===t.$store.state.userInfo.userId?(t.formCustom.content=e.data.map.texts.textContent,t.formCustom.title=e.data.map.texts.textTitle,t.formCustom.writer=e.data.map.texts.user.userName):t.$router.push("/index"):t.$Message.error("获取文章失败")}).catch(function(e){t.$Message.warning("获取文章失败")})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(""==e.formCustom.content)e.$Message.error("内容不能为空");else if(t){var s=new URLSearchParams;s.append("textContent",e.formCustom.content),s.append("textId",e.formCustom.textId),s.append("textTitle",e.formCustom.title),e.axios.put("text/"+e.formCustom.textId,s).then(function(t){100===t.data.code?(e.$Message.success("更新成功"),e.reload()):e.$Message.error("更新失败")}).catch(function(t){e.$Message.warning("更新文章失败")})}else e.$Message.error("Fail!")})},handleReset:function(){this.formCustom.content="",this.formCustom.title=""}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){this.formCustom.textId=this.textId,this.getContent()},props:["textId"]},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit_container"},[s("Form",{ref:"formCustom",staticStyle:{"text-align":"center"},attrs:{model:t.formCustom,rules:t.ruleValidate}},[s("FormItem",{staticStyle:{width:"200px",margin:"0px auto"},attrs:{prop:"title"}},[s("Input",{attrs:{type:"text",placeholder:"请输入标题"},model:{value:t.formCustom.title,callback:function(e){t.$set(t.formCustom,"title",e)},expression:"formCustom.title"}})],1),t._v(" "),s("FormItem",[s("p",{staticStyle:{"text-align":"center","font-weight":"bolder","font-size":"20px",margin:"5px"}},[t._v("作者："+t._s(t.formCustom.writer))])]),t._v(" "),s("FormItem",[s("quill-editor",{ref:"myQuillEditor",model:{value:t.formCustom.content,callback:function(e){t.$set(t.formCustom,"content",e)},expression:"formCustom.content"}})],1),t._v(" "),s("FormItem",[s("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formCustom")}}},[t._v("修改")]),t._v(" "),s("Button",{staticStyle:{"margin-left":"8px"},on:{click:t.handleReset}},[t._v("清空")])],1)],1)],1)},staticRenderFns:[]},x={name:"ReadText",inject:["reload"],data:function(){return{flag:!1,collect:!1,like:!1,text:"",userName:"",textId:0,editor:!1,beforePath:"/personHome/"}},methods:{getText:function(){var t=this;this.axios.get("text/"+this.textId).then(function(e){100===e.data.code?(t.text=e.data.map.texts,t.userName=t.text.user.userName,t.checkFocusOr(),t.checkCollect(),t.checkLike()):t.$router.push("/index")}).catch(function(t){})},checkFocusOr:function(){var t=this;this.flag=!1,""!==this.$store.state.userInfo&&this.axios.get("fansCheck",{params:{focusUserid:this.$store.state.userInfo.userId,focusBeuserid:this.text.textWriterid}}).then(function(e){100===e.data.code&&(t.flag=!0)}).catch(function(e){t.$Message.warning("检查是否关注出错")})},handleCancleFocus:function(){var t=this;""!==this.$store.state.userInfo?this.axios.delete("focus",{params:{focusUserid:this.$store.state.userInfo.userId,focusBeuserid:this.text.textWriterid}}).then(function(e){100===e.data.code?(t.$Message.success("取消关注"),t.$store.commit("setFocusNumSub"),t.reload()):t.$Message.error("取关失败")}).catch(function(e){t.$Message.warning("取消关注失败")}):this.$router.push("/login")},handleFocusOn:function(){var t=this;""===this.$store.state.userInfo?(this.$Message.info("还未登陆---\x3e正在前往登陆"),this.$router.push("/login")):this.axios.get("focus",{params:{focusUserid:this.$store.state.userInfo.userId,focusBeuserid:this.text.textWriterid}}).then(function(e){100===e.data.code?(t.$Message.success("关注成功"),t.$store.commit("setFocusNumAdd"),t.reload()):t.$Message.error("关注失败")}).catch(function(e){t.$Message.warning("关注失败")})},checkCollect:function(){var t=this;this.collect=!1,""!==this.$store.state.userInfo&&this.axios.get("collectCheck",{params:{collectUserid:this.$store.state.userInfo.userId,collectTextid:this.text.textId}}).then(function(e){100===e.data.code&&(t.collect=!0)}).catch(function(e){t.$Message.warning("获取是否收藏失败")})},handleCollect:function(){var t=this;""!==this.$store.state.userInfo?this.axios.get("collect",{params:{collectUserid:this.$store.state.userInfo.userId,collectTextid:this.text.textId}}).then(function(e){100===e.data.code?(t.collect=!0,t.$Message.success("首场成功"),t.$store.commit("setCollectionsNumAdd"),t.reload()):t.$Message.error("收藏失败")}).catch(function(e){t.$Message.warning("收藏失败")}):this.$router.push("/login")},handleCancleCollect:function(){var t=this;""!==this.$store.state.userInfo?this.axios.delete("collect",{params:{collectUserid:this.$store.state.userInfo.userId,collectTextid:this.text.textId}}).then(function(e){100===e.data.code?(t.collect=!1,t.$Message.success("取消收藏成功"),t.$store.commit("setCollectionsNumSub"),t.reload()):t.$Message.error("取消收藏失败")}).catch(function(e){t.$Message.warning("取消收藏失败")}):this.$router.push("/login")},checkLike:function(){var t=this;this.like=!1,""!==this.$store.state.userInfo&&this.axios.get("likeCheck",{params:{likesUserid:this.$store.state.userInfo.userId,likesTextid:this.text.textId}}).then(function(e){100===e.data.code&&(t.like=!0)}).catch(function(e){t.$Message.warning("获取是否点赞失败")})},handleLike:function(){var t=this;""!==this.$store.state.userInfo?this.axios.get("like",{params:{likesUserid:this.$store.state.userInfo.userId,likesTextid:this.text.textId}}).then(function(e){100===e.data.code?(t.like=!0,t.$Message.success("点赞成功"),t.reload()):t.$Message.error("点赞失败")}).catch(function(e){t.$Message.warning("点赞失败")}):this.$router.push("/login")},handleCancleLike:function(){var t=this;""!==this.$store.state.userInfo?this.axios.delete("like",{params:{likesUserid:this.$store.state.userInfo.userId,likesTextid:this.text.textId}}).then(function(e){100===e.data.code?(t.like=!1,t.$Message.success("取消点赞成功"),t.reload()):t.$Message.error("取消点赞失败")}).catch(function(e){t.$Message.warning("取消点赞失败")}):this.$router.push("/login")}},components:{Comment:d,Editor:s("C7Lr")(f,p,!1,null,null,null).exports,HeadPortrait:o.a},created:function(){this.textId=this.$route.query.textId,this.beforePath+=this.$route.params.userId+"/textsList",this.getText()}},g={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"box"},[o("Row",{staticStyle:{"margin-top":"15px"}},[o("Col",{attrs:{offset:"1"}},[o("Breadcrumb",[o("BreadcrumbItem",{attrs:{to:"/"}},[o("Icon",{attrs:{type:"ios-home-outline"}}),t._v("主页")],1),t._v(" "),-1!==this.$router.history.current.path.indexOf("/editor")?o("BreadcrumbItem",{attrs:{to:t.beforePath}},[o("Icon",{attrs:{type:"ios-paper-outline"}}),t._v("文章列表")],1):t._e(),t._v(" "),o("BreadcrumbItem",[o("Icon",{attrs:{type:"ios-bookmark-outline"}}),t._v("查看文章")],1)],1)],1)],1),t._v(" "),o("Row",{attrs:{type:"flex"}},[o("Col",{staticStyle:{"font-weight":"bolder","font-size":"40px"},attrs:{offset:"1"}},[t._v(" "+t._s(this.text.textTitle))])],1),t._v(" "),o("Row",{attrs:{type:"flex",align:"middle"}},[o("Col",{staticStyle:{"font-size":"15px"},attrs:{offset:"1"}},[o("Button",{attrs:{type:"text"},on:{click:function(e){t.$router.push("/personHome/"+t.text.user.userId),t.reload()}}},["default.jpg"===this.text.user.userHeadportrait?o("img",{staticClass:"round_icon",attrs:{src:s("JoZn")}}):o("Head-portrait",{attrs:{src:this.text.user.userHeadportrait}})],1)],1),t._v(" "),o("Col",{staticClass:"headBox"},[o("p",{staticStyle:{"font-size":"25px"}},[t._v("\n        "+t._s(this.userName)+"\n        "),""===this.$store.state.userInfo?o("span",[o("Button",{staticStyle:{margin:"10px"},attrs:{type:"success",size:"small",shape:"circle"},on:{click:t.handleFocusOn}},[t._v("+关注")])],1):this.text.textWriterid!==this.$store.state.userInfo.userId?o("span",[t.flag?o("Button",{attrs:{type:"error",size:"small",shape:"circle"},on:{click:t.handleCancleFocus}},[t._v("取消关注")]):o("Button",{staticStyle:{margin:"10px"},attrs:{type:"success",size:"small",shape:"circle"},on:{click:t.handleFocusOn}},[t._v("+关注")])],1):t._e()]),t._v(" "),o("Tooltip",{staticStyle:{"margin-right":"5px"},attrs:{content:"最后修改日期"}},[t._v("\n        "+t._s(this.text.textReleasedate)+"\n      ")]),t._v(" "),o("span",[t._v("点击量 "+t._s(this.text.textCount))]),t._v(" "),o("span",[t._v("评论数 "+t._s(this.text.textCommentnum))]),t._v(" "),o("span",[t._v("点赞数 "+t._s(this.text.textLikenum))]),t._v(" "),o("span",[t._v("收藏数 "+t._s(this.text.textCollectnum))])],1)],1),t._v(" "),t.editor?o("Row",[o("Editor",{attrs:{textId:this.text.textId}}),t._v(" "),o("Col",{attrs:{offset:"20"}},[o("Button",{attrs:{type:"info"},on:{click:function(e){t.editor=!1}}},[t._v("退出编辑")])],1)],1):o("Row",[o("Row",[o("Col",{attrs:{offset:"2"}},[o("p",{domProps:{innerHTML:t._s(t.text.textContent)}})])],1),t._v(" "),o("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[o("Col",[o("Tooltip",{attrs:{content:"收藏"}},[this.collect?o("Button",{attrs:{type:"text",shape:"circle",ghost:""},on:{click:t.handleCancleCollect}},[o("Icon",{staticClass:"btn",attrs:{type:"ios-star",size:"40"}})],1):o("Button",{attrs:{type:"text",shape:"circle",ghost:""},on:{click:t.handleCollect}},[o("Icon",{staticClass:"bt",attrs:{type:"ios-star",size:"40"}})],1)],1),t._v(" "),o("Tooltip",{attrs:{content:"点赞"}},[this.like?o("Button",{attrs:{type:"text",shape:"circle",ghost:""},on:{click:t.handleCancleLike}},[o("Icon",{staticClass:"btn",attrs:{type:"ios-thumbs-up",size:"40"}})],1):o("Button",{attrs:{type:"text",shape:"circle",ghost:""},on:{click:t.handleLike}},[o("Icon",{staticClass:"bt",attrs:{type:"ios-thumbs-up",size:"40"}})],1)],1)],1)],1),t._v(" "),t.text.textWriterid===this.$store.state.userInfo.userId?o("Row",[o("Col",{attrs:{type:"flex",justify:"center",align:"middle"}},[o("Button",{attrs:{type:"success",size:"large"},on:{click:function(e){t.editor=!0}}},[t._v("编辑")])],1)],1):t._e()],1)],1),t._v(" "),o("div",{staticClass:"box"},[o("Comment",{attrs:{textId:t.textId,textWriterId:t.text.textWriterid}})],1)])},staticRenderFns:[]};var v=s("C7Lr")(x,g,!1,function(t){s("bo/U")},"data-v-425da6db",null);e.default=v.exports},WRsR:function(t,e){},"bo/U":function(t,e){},thWI:function(t,e){}});
//# sourceMappingURL=1.135d75139ce17284efb4.js.map
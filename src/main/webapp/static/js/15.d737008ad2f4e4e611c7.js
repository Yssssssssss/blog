webpackJsonp([15],{nbxc:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"CollectionsList",inject:["reload"],data:function(){var t=this;return{pages:0,pageSize:10,pageNum:1,focusList:[],total:0,loading:!0,columns1:[{title:"文章标题",render:function(t,e){return t("div",e.row.text.textTitle)}},{title:"作者",render:function(t,e){return t("Button",{on:{click:function(){self.location.href="#/personHome/"+e.row.text.user.userId}},props:{type:"text"}},e.row.text.user.userName)}},{title:"摘要",render:function(t,e){return t("div",e.row.text.textContent.replace(/<(style|script|iframe)[^>]*?>[\s\S]+?<\/\1\s*>/gi,"").replace(/<[^>]+?>/g,"").replace(/\s+/g," ").replace(/ /g," ").replace(/>/g," ").substring(0,15)+"...")}},{title:"操作",render:function(e,o){return t.userId==t.$store.state.userInfo.userId?e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.getToEditor(o.row)}}},"查看"),e("Button",{props:{type:"warning"},style:{marginRight:"5px"},on:{click:function(){t.handleCancleCollect(o.row)}}},"取消收藏")]):e("div",[e("Button",{props:{type:"primary"},style:{marginRight:"5px"},on:{click:function(){t.getToEditor(o.row)}}},"查看")])}}]}},methods:{getOnesAllCollect:function(){var t=this;this.axios.get("collect/"+this.userId,{params:{pageNum:this.pageNum}}).then(function(e){100===e.data.code&&(t.focusList=e.data.map.userAllCollect.list,t.pages=e.data.map.userAllCollect.pages,t.pageNum=e.data.map.userAllCollect.pageNum,t.pageSize=e.data.map.userAllCollect.pageSize,t.total=e.data.map.userAllCollect.total),t.loading=!1}).catch(function(e){t.$Message.warning("获取关注列表失败")})},pageChange:function(t){this.pageNum=t},handleCancleCollect:function(t){var e=this;this.axios.delete("collect",{params:{collectUserid:t.collectUserid,collectTextid:t.collectTextid}}).then(function(t){100===t.data.code?(e.$Message.success("取消收藏"),e.$store.commit("setCollectionsNumSub"),e.reload()):e.$Message.error("取消收藏失败")}).catch(function(t){e.$Message.warning("取藏失败")})},getToEditor:function(t){this.$router.push("editor?textId="+t.collectTextid)}},components:{},mounted:function(){this.userId=this.$route.params.userId,this.getOnesAllCollect()},watch:{pageNum:function(){this.getOnesAllCollect()}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Table",{attrs:{border:"",stripe:"","no-data-text":"并没有收藏任何东西",loading:t.loading,columns:t.columns1,data:t.focusList}}),t._v(" "),o("Row",[o("Col",{attrs:{span:"4",offset:"4"}},[t._v("\n      总共"+t._s(t.total)+"条数据\n    ")]),t._v(" "),o("Col",[o("Page",{attrs:{total:t.total,current:t.pageNum,"show-elevator":""},on:{"on-change":t.pageChange}})],1)],1)],1)},staticRenderFns:[]};var r=o("C7Lr")(n,a,!1,function(t){o("u419")},"data-v-23b52037",null);e.default=r.exports},u419:function(t,e){}});
//# sourceMappingURL=15.d737008ad2f4e4e611c7.js.map
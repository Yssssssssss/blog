webpackJsonp([14],{"0OPg":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={name:"Regist",data:function(){var e=this;return{focus:!0,formCustom:{username:"",password:"",passwordCheck:"",email:"",gender:"M",headPortrait:"default.jpg"},ruleCustom:{username:[{validator:function(r,t,o){""===t?o(new Error("用户名不能为空")):e.axios.get("user/"+e.formCustom.username).then(function(e){200==e.data.code?o():o("该用户名已被注册")}).catch(function(r){e.$Message.error("校验用户名失败")})},trigger:"blur"}],password:[{validator:function(r,t,o){""===t?o(new Error("请输入密码")):(""!==e.formCustom.passwordCheck&&e.$refs.formCustom.validateField("passwordCheck"),o())},trigger:"blur"}],passwordCheck:[{validator:function(r,t,o){""===t?o(new Error("请再次输入密码")):t!==e.formCustom.password?o(new Error("两次输入不一致")):o()},trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var r=this;this.$refs[e].validate(function(e){if(e){var t=new URLSearchParams;t.append("userName",r.formCustom.username),t.append("userPassword",r.formCustom.password),t.append("userEmail",r.formCustom.email),t.append("userGender",r.formCustom.gender),t.append("userHeadportrait",r.formCustom.headPortrait),r.axios.post("register",t).then(function(e){100===e.data.code?(r.$Message.success("注册成功"),r.$router.push("/login")):r.$Message.error("注册失败")}).catch(function(e){r.$Message.warning("错误！请重新注册")})}else r.$Message.error("Fail!")})},handleReset:function(e){this.$refs[e].resetFields()},handleSuccess:function(e){this.formCustom.headPortrait=e.map.headPortrait},handleFormatError:function(e){this.$Notice.warning({title:"图片格式不正确",desc:e.name+" 不是一张图片"})},handleMaxSize:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"图片 "+e.name+" 大于2M"})}}},s={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"register"},[t("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[t("Form",{ref:"formCustom",staticClass:"registerForm",attrs:{"label-position":"left",model:e.formCustom,rules:e.ruleCustom,"label-width":80}},[t("FormItem",{attrs:{label:"用户名",prop:"username"}},[t("Input",{attrs:{type:"text",autofocus:e.focus},model:{value:e.formCustom.username,callback:function(r){e.$set(e.formCustom,"username",r)},expression:"formCustom.username"}})],1),e._v(" "),t("FormItem",{attrs:{label:"密码",prop:"password"}},[t("Input",{attrs:{type:"password"},model:{value:e.formCustom.password,callback:function(r){e.$set(e.formCustom,"password",r)},expression:"formCustom.password"}})],1),e._v(" "),t("FormItem",{attrs:{label:"确认密码",prop:"passwordCheck"}},[t("Input",{attrs:{type:"password"},model:{value:e.formCustom.passwordCheck,callback:function(r){e.$set(e.formCustom,"passwordCheck",r)},expression:"formCustom.passwordCheck"}})],1),e._v(" "),t("FormItem",{attrs:{label:"邮箱",prop:"email"}},[t("Input",{attrs:{type:"email"},model:{value:e.formCustom.email,callback:function(r){e.$set(e.formCustom,"email",r)},expression:"formCustom.email"}})],1),e._v(" "),t("FormItem",[t("Upload",{ref:"upload",attrs:{"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,multiple:"",action:"http://106.14.137.176:8080/blog/file"}},[t("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("上传头像")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"性别",prop:"gender"}},[t("radio-group",{model:{value:e.formCustom.gender,callback:function(r){e.$set(e.formCustom,"gender",r)},expression:"formCustom.gender"}},[t("Radio",{attrs:{label:"M",value:"M"}},[e._v("男")]),e._v(" "),t("Radio",{attrs:{label:"F",value:"F"}},[e._v("女")])],1)],1),e._v(" "),t("FormItem",[t("Button",{attrs:{type:"primary"},on:{click:function(r){return e.handleSubmit("formCustom")}}},[e._v("注册")]),e._v(" "),t("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(r){return e.handleReset("formCustom")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var a=t("C7Lr")(o,s,!1,function(e){t("4WZs")},"data-v-2408cdcb",null);r.default=a.exports},"4WZs":function(e,r){}});
//# sourceMappingURL=14.19c56da4ecd37036db89.js.map